{"version":3,"sources":["Loading.js","App.js","index.js"],"names":["Loading","loading","App","useState","setLoading","hight","params","setParams","details","setDetails","fetchData","a","queryUrl","console","log","metro","train","lightRail","bus","ferry","filterDateValid","fetch","headers","response","text","then","res","JSON","parse","data","newInfo","infos","current","filter","obj","priority","normal","low","useEffect","handleParamChange","e","param","target","name","value","checked","prevParams","className","type","onChange","newDate","mm","getMonth","dd","getDate","str","getFullYear","join","map","detail","dangerouslySetInnerHTML","__html","subtitle","content","id","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b51afb44.chunk.js","sourcesContent":["import React from 'react';\n\nconst Loading = ({loading}) => {\n  if(loading){\n    return <h1>loading...</h1>\n  }\n  return      <> </>\n};\n\nexport default Loading;\n","import React, { useState,useEffect } from 'react';\nimport { CalendarComponent } from '@syncfusion/ej2-react-calendars';\nimport './App.css';\nimport Loading from './Loading';\n\n\nexport default function App() {\n  const [loading, setLoading] = useState(false)\n  const [params, setParams] = useState({hight:false})\n  const [details,setDetails] = useState([])\n\n  const fetchData = async () => {\n    setLoading(true)\n    //train 1, metro 2, lightRail 4,bus 5,ferry 9\n    try {\n      let queryUrl = ''\n      console.log(params)\n      if(params.metro){\n        queryUrl+=\"&filterMOTType=2\"\n      }\n      if(params.train){\n        queryUrl+=\"&filterMOTType=1\"\n      }\n      if(params.lightRail){\n        queryUrl+=\"&filterMOTType=4\"\n      }\n      if(params.bus){\n        queryUrl+=\"&filterMOTType=5\"\n      }\n      if(params.ferry){\n        queryUrl+=\"&filterMOTType=9\"\n      }\n      if(params.filterDateValid){\n        queryUrl+=\"&filterDateValid=\" + params.filterDateValid\n      }\n\n      console.log(\"/v1/tp/add_info?outputFormat=rapidJSON&filterPublicationStatus=current\" + queryUrl)\n\n      const response = await fetch(\"/v1/tp/add_info?outputFormat=rapidJSON&filterPublicationStatus=current\" + queryUrl, {\n        //method: 'GET',\n        headers: {\n          'Authorization': 'apikey rW87skJDoE4rEqwfB0HvIMeYTO2RdbfBYv6w',\n          'Content-Type':'application/json',\n        },\n    })\n      const data = await response.text().then((res)=>JSON.parse(res))\n      const newInfo = data.infos.current.filter(\n        (obj)=>(params.hight?obj.priority==='hight':false)\n              ||(params.normal?obj.priority==='normal':false)\n              ||(params.low?obj.priority==='low':false));\n\n      setDetails(newInfo)\n      setLoading(false)\n    } catch (error) {\n       setLoading(false)\n      console.log(error)\n    }\n  }\n\n  useEffect(() => {\n    fetchData()\n  }, [params])\n\nconst handleCal  = (e) => {\n  const newDate = e.target.value\n  let mm = newDate.getMonth()+1;\n  let dd = newDate.getDate();\n\n   let str = [(dd>9 ? '' : '0') + dd,\n   (mm>9 ? '' : '0') + mm,\n   newDate.getFullYear()\n  ].join('-');\n\n   setParams(prevParams=>{\n    return {...prevParams,['filterDateValid']:str}\n  })\n}\n\n  function handleParamChange(e){\n    const param = e.target.name\n    const value = e.target.checked\n\n    setParams(prevParams=>{\n      return {...prevParams,[param]:value}\n    })\n  }\n\n\n  return (\n    <>\n      <div className='block-left'>  \n        <h5>Filters:</h5>\n        <h5>Priority</h5>\n        <input type='checkbox' name = 'hight' onChange={handleParamChange} checked={params.hight} />&nbsp;High\n        <br/>\n        <input type='checkbox' name = 'normal' onChange={handleParamChange} checked={params.normal} />&nbsp;Normal\n        <br/>\n        <input type='checkbox' name = 'low' onChange={handleParamChange} checked={params.low} />&nbsp;Low\n        <br/>\n        <br/>\n        <h5>Mode</h5>\n        <input type='checkbox' name = 'metro' onChange={handleParamChange} checked={params.metro} />&nbsp;Metro\n        <br/>\n        <input type='checkbox' name = 'train' onChange={handleParamChange} checked={params.train} />&nbsp;Train\n        <br/>\n        <input type='checkbox' name = 'bus' onChange={handleParamChange} checked={params.bus} />&nbsp;Bus\n        <br/>\n        <input type='checkbox' name = 'ferry' onChange={handleParamChange} checked={params.ferry} />&nbsp;Ferry\n        <br/>\n        <input type='checkbox' name = 'lightRail' onChange={handleParamChange} checked={params.lightRail} />&nbsp;Light Rail\n\n\n      </div>\n      <div className='block-midle'>\n        <CalendarComponent  onChange={handleCal}/>\n      </div>\n      <div className='block-right'>\n        <Loading loading = {loading}/>\n      {\n        details.map((detail)=>{\n\n          return (\n            <div key={detail.id}>\n              <div dangerouslySetInnerHTML={{__html: detail.subtitle}} />\n              <div dangerouslySetInnerHTML={{__html: detail.content}} />\n              <br/>\n            </div>\n          )\n        })\n      }\n\n      </div>\n    </>\n  )\n}\n\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}